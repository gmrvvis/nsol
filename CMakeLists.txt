project(nsdl)

cmake_minimum_required(VERSION 2.8)

SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++0x -Wall")
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -DDEBUG")

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/src ${VMMLIB_INSTALL_DIR}/include) 


FILE(GLOB INSTALL_FILES src/*.h)
#install(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/src DESTINATION include/nol)


file(GLOB DEPLOY_FILES_AND_DIRS "${CMAKE_CURRENT_SOURCE_DIR}/src/*")
foreach(ITEM ${DEPLOY_FILES_AND_DIRS})
   IF( IS_DIRECTORY "${ITEM}" )
      LIST( APPEND DIRS_TO_DEPLOY "${ITEM}" )
   ELSE()
     GET_FILENAME_COMPONENT(FILE_EXT "${ITEM}" "EXT")
     IF( FILE_EXT STREQUAL ".h" )
       LIST( APPEND FILES_TO_DEPLOY "${ITEM}" )
     ENDIF()
   ENDIF()
endforeach()
INSTALL( FILES ${FILES_TO_DEPLOY} DESTINATION include/nol )
INSTALL( DIRECTORY ${DIRS_TO_DEPLOY} DESTINATION include/nol )

add_subdirectory(test)
