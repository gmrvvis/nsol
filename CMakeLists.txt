project(nsol)

cmake_minimum_required(VERSION 2.8)

SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++0x -Wall")
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -DDEBUG")

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/src ${VMMLIB_INSTALL_DIR}/include) 


FILE(GLOB INSTALL_FILES src/*.h)
#install(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/src DESTINATION include/nsol)


file(GLOB DEPLOY_FILES_AND_DIRS "${CMAKE_CURRENT_SOURCE_DIR}/src/*")
foreach(ITEM ${DEPLOY_FILES_AND_DIRS})
   IF( IS_DIRECTORY "${ITEM}" )
      LIST( APPEND DIRS_TO_DEPLOY "${ITEM}" )
   ELSE()
     GET_FILENAME_COMPONENT(FILE_EXT "${ITEM}" "EXT")
     IF( FILE_EXT STREQUAL ".h" )
       LIST( APPEND FILES_TO_DEPLOY "${ITEM}" )
     ENDIF()
   ENDIF()
endforeach()
INSTALL( FILES ${FILES_TO_DEPLOY} DESTINATION include/ )
INSTALL( DIRECTORY ${DIRS_TO_DEPLOY} DESTINATION include/ )

add_subdirectory(test)

add_library (nsol 
${CMAKE_CURRENT_SOURCE_DIR}/src/nsol/Column.cpp
)
if (MSVC)
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_BUILD_TYPE}/nson.lib DESTINATION lib)
else()
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/libnsol.a DESTINATION lib)
endif()

